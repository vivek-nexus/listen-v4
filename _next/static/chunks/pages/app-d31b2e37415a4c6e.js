(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{6898:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app",function(){return t(6528)}])},6528:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return B}});var i=t(1799),o=t(9396),r=t(5893),a=t(9008),s=t.n(a),l=t(1163),c=t(1673),h=t.n(c),d=t(2838),u=t(7002),p=t(7797),g=t(7551),m=t(7343),x=t(5258),y=t(5146),f=t(2966),j=t(7294),v=t(6440),w=t(309),b=t(5518),k=(t(3795),{option:function(e,n){return(0,o.Z)((0,i.Z)({},e),{color:"white"})},singleValue:function(e,n){return(0,o.Z)((0,i.Z)({},e),{color:"white",padding:"8px"})}}),S=[],C={isPlaying:!1,counter:-1};function E(e,n,t){var i=window.speechSynthesis.getVoices(),o=[],r=[],a=[],s=!0,l=!1,c=void 0;try{for(var h,d=i[Symbol.iterator]();!(s=(h=d.next()).done);s=!0){var u=h.value;"Google"==u.name.substring(0,6)&&"en"==u.lang.substring(0,2)?o.push({label:"".concat(u.name," (").concat(u.lang,")"),value:"".concat(u.name," (").concat(u.lang,")")}):"en"==u.lang.substring(0,2)&&"Google"!=u.name.substring(0,6)?r.push({label:"".concat(u.name," (").concat(u.lang,")"),value:"".concat(u.name," (").concat(u.lang,")")}):a.push({label:"".concat(u.name," (").concat(u.lang,")"),value:"".concat(u.name," (").concat(u.lang,")")})}}catch(p){l=!0,c=p}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}e(o),n(r),t(a)}function T(e,n,t){var i;t([]),fetch("https://hidden-citadel-76712.herokuapp.com?url=".concat(e),{method:"GET",redirect:"follow"}).then((function(e){return e.text()})).then((function(e){i=JSON.parse(e);var o=new DOMParser,r=o.parseFromString(i.content,"text/html").querySelectorAll("h1, h2, h3, h4, h5, p, li, a"),a="Title: ".concat(i.title,".\n\n"),s=!0,l=!1,c=void 0;try{for(var h,d=r[Symbol.iterator]();!(s=(h=d.next()).done);s=!0){var u=h.value;console.log(u.textContent),a=a+u.textContent+". "}}catch(p){l=!0,c=p}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}t(a),n(!1)})).catch((function(e){return console.log("error",e)}))}function P(e,n){switch(n.type){case"start":case"prevB":return{counter:e.counter+1,isPlaying:!0};case"tick":return(0,o.Z)((0,i.Z)({},e),{counter:e.counter+1});case"pause":case"prevA":return{counter:e.counter-1,isPlaying:!1};case"stop":return{isPlaying:!1,counter:-1};case"next":return{counter:e.counter+2,isPlaying:!0};default:throw new Error}}function B(){var e=(0,l.useRouter)(),n=(0,j.useState)(null),t=n[0],a=n[1],c=(0,j.useState)("This is a sample text! You can use this tool to proof-read your articles, explore pronunciation! On desktop devices, Google voices provided by Chrome browser are the best. On Android/iOS, good voices are installed by default, but may need tweaking in device settings."),B=c[0],N=c[1],_=(0,j.useState)(""),O=_[0],z=_[1],I=(0,j.useState)(!1),R=I[0],L=I[1],A=(0,j.useState)(1),D=A[0],F=A[1],X=(0,j.useState)([]),G=X[0],Z=X[1],H=(0,j.useState)([{value:"English",label:"English"}]),V=H[0],q=H[1],M=(0,j.useState)([{value:"KN",label:"KN"}]),Y=M[0],W=M[1],K=(0,j.useReducer)(P,C),U=K[0],J=K[1],Q=(0,j.useRef)(!1),$=[{label:"BEST ENGLISH VOICES",options:G},{label:"LOCAL ENGLISH VOICES",options:V},{label:"NON ENGLISH VOICES",options:Y}];return(0,j.useEffect)((function(){E(Z,q,W),setTimeout((function(){E(Z,q,W)}),100),localStorage.getItem("voice")?a(localStorage.getItem("voice")):a("Default"),N(""),b.tq&&window.addEventListener("blur",(function(){J({type:"pause"})}));var e,n,t,i,o=new URLSearchParams(window.location.search).get("url");o&&(z(o),L(!0),T(o,L,N)),e=window,n=document,e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:2800643,hjsv:6},t=n.getElementsByTagName("head")[0],(i=n.createElement("script")).async=1,i.src="https://static.hotjar.com/c/hotjar-"+e._hjSettings.hjid+".js?sv="+e._hjSettings.hjsv,t.appendChild(i),window._mfq=window._mfq||[],function(){var e=document.createElement("script");e.type="text/javascript",e.defer=!0,e.src="//cdn.mouseflow.com/projects/d9319a07-5eae-4d34-b65b-6f52cd591faa.js",document.getElementsByTagName("head")[0].appendChild(e)}()}),[]),(0,j.useEffect)((function(){!function(e){if(""!=e){var n=(0,w.split)(e);S=[];var t=!0,i=!1,o=void 0;try{for(var r,a=n[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;"Sentence"==s.type&&S.push(s.raw)}}catch(l){i=!0,o=l}finally{try{t||null==a.return||a.return()}finally{if(i)throw o}}}}(B)}),[B]),(0,j.useEffect)((function(){console.log("isPlaying EFFECT; isPlaying "+U.isPlaying+"; counter "+U.counter),Q.current=U.isPlaying,U.isPlaying||window.speechSynthesis.cancel()}),[U.isPlaying]),(0,j.useEffect)((function(){console.log("counter EFFECT; isPlaying "+U.isPlaying+"; counter "+U.counter),U.isPlaying&&(U.counter<0&&J({type:"stop"}),U.counter<S.length?function(e,n,t){var i,o=window.speechSynthesis,r=o.getVoices(),a=!0,s=!1,l=void 0;try{for(var c,h=r[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var d=c.value;"".concat(d.name," (").concat(d.lang,")")==e&&(i=d)}}catch(p){s=!0,l=p}finally{try{a||null==h.return||h.return()}finally{if(s)throw l}}var u=new SpeechSynthesisUtterance(n);return u.voice=i,o.speak(u),new Promise((function(e){u.onend=e}))}(t,S[U.counter]).then((function(){console.log("isPlayingRef "+Q.current),U.isPlaying&&Q.current&&(J({type:"tick"}),console.log("Dispatched tick event"))})):(J({type:"stop"}),console.log("Dispatched stop event")))}),[U.counter]),(0,r.jsxs)("div",{className:h().container,children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:"Listen"}),(0,r.jsx)("meta",{name:"description",content:"Listen to articles \u2014 just like a podcast!"}),(0,r.jsx)("link",{rel:"icon",href:"/headphones.png"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:!0}),(0,r.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;700&display=swap",rel:"stylesheet"}),(0,r.jsx)("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"}),(0,r.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,r.jsx)("meta",{name:"theme-color",content:"#00a885"})]}),(0,r.jsxs)(d.E,{as:"div",marginTop:"micro",style:{display:"flex"},children:[(0,r.jsx)(u.X,{as:"h5",marginBottom:"none",marginTop:"nano",marginRight:"nano",children:(0,r.jsx)("span",{className:"material-icons",onClick:function(){e.push("/")},style:{cursor:"pointer",fontWeight:"700"},children:"arrow_back"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(u.X,{as:"h4",marginBottom:"none",children:" What will you listen to, today?"}),(0,r.jsx)(p.x,{marginTop:"none",textColor:"orange-70",children:"Google Chrome recommended "})]})]}),(0,r.jsxs)(g.X,{marginBottom:"huge",className:"push-to-ends",children:[(0,r.jsxs)(m.Y,{desktopSpan:"15",children:[(0,r.jsx)(x.U,{label:"Paste link to article",placeholder:"https://yourfavblog.com/article-12",errorText:"Looks invalid. Check?",type:"url",value:O,onChange:function(e){z(e.target.value)},style:{color:"".concat(h().textColor)}}),(0,r.jsxs)(g.X,{marginBottom:"none",children:[(0,r.jsxs)(m.Y,{desktopSpan:"10",mobileSpan:"10",tabLSSpan:"10",tabPTSpan:"10",children:[!R&&(0,r.jsx)(y.z,{kind:"secondary",size:"small",marginBottom:"micro",onClick:function(){L(!0),T(O,L,N)},children:"FETCH"}),R&&(0,r.jsx)(y.z,{kind:"secondary",size:"small",marginBottom:"micro",isLoading:!0,children:"FETCH"})]}),(0,r.jsx)(m.Y,{desktopSpan:"14",mobileSpan:"14",tabLSSpan:"14",tabPTSpan:"14",children:(0,r.jsx)(p.x,{margin:"none",children:"\u2014 OR \u2014"})})]}),(0,r.jsx)(f.K,{id:"text-area",label:"Paste article text",placeholder:"A word, a pragraph or a long article",rows:3,value:B,onChange:function(e){N(e.target.value)},style:{color:"".concat(h().textColor),lineHeight:"2rem"},marginBottom:"micro"}),(0,r.jsxs)(d.E,{marginTop:"micro",as:"div",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(p.x,{className:h().primaryFontColor,style:{margin:"0px 0px 2px 0px"},children:"Pick a voice"}),(0,r.jsx)(y.z,{kind:"tertiary",size:"small",marginBottom:"none",style:{},onClick:function(){e.push("/app/#help")},children:"HELP"})]}),null!=t&&(0,r.jsx)(v.ZP,{className:"animate__animated animate__pulse animate__delay-2s",styles:k,options:$,isSearchable:!1,isClearable:!0,onMenuOpen:function(){J({type:"pause"})},defaultValue:{label:t,value:t},onChange:function(e){!function(e,n,t){e?(t(e.label),localStorage.setItem("voice",e.label)):(t("Default"),localStorage.setItem("voice","Default"))}(e,0,a)},theme:function(e){return(0,o.Z)((0,i.Z)({},e),{colors:(0,o.Z)((0,i.Z)({},e.colors),{primary:"#03DAC599",primary25:"#03DAC53D",primary50:"#2E2E2E",neutral0:"#2E2E2E",neutral80:"white"})})}})]}),(0,r.jsx)(m.Y,{desktopSpan:"8",children:U.isPlaying&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.E,{showOnlyOnDesktop:!0,showOnlyOnTabLS:!0,as:"div",shape:"rounded",children:[(0,r.jsxs)(d.E,{as:"div",style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(u.X,{as:"h6",weight:"300",marginRight:"micro",children:"Reading now"}),(0,r.jsx)(d.E,{as:"img",src:"https://yakshag.github.io/listen/speaking.gif",className:h().icon48,style:{width:"36px",alignSelf:"center"}})]}),(0,r.jsx)("div",{textColor:"red",children:b.G6?(0,r.jsx)(p.x,{marginTop:"none",textColor:"red-70",children:"App may not work on Safari"}):(0,r.jsx)(r.Fragment,{})}),(0,r.jsx)(d.E,{as:"div",style:{height:"10rem",overflow:"auto"},children:(0,r.jsx)(p.x,{id:"readingText",margin:"none",children:(0,r.jsx)("i",{children:S[U.counter]})})})]}),(0,r.jsxs)(d.E,{showOnlyOnMobile:!0,showOnlyOnTabPT:!0,as:"div",shape:"rounded",children:[(0,r.jsxs)(d.E,{as:"div",style:{display:"flex",alignItems:"center",marginTop:"2rem"},children:[(0,r.jsx)(u.X,{as:"h6",weight:"300",marginRight:"micro",children:"Reading now"}),(0,r.jsx)(d.E,{as:"img",src:"https://yakshag.github.io/listen/speaking.gif",className:h().icon48,style:{width:"36px",alignSelf:"center"}})]}),(0,r.jsx)(d.E,{as:"div",style:{height:"7rem",overflow:"auto"},children:(0,r.jsx)(p.x,{id:"readingText",margin:"none",children:(0,r.jsx)("i",{children:S[U.counter]})})})]})]})})]}),(0,r.jsx)("div",{style:{position:"fixed",width:"100%",right:0,bottom:"2.5%"},children:(0,r.jsxs)("div",{className:h().playerStrip,style:{position:"relative"},children:[(0,r.jsx)("div",{children:U.counter<0?(0,r.jsx)("div",{style:{width:"100%",backgroundColor:"".concat(h().primaryColor),height:"4px"}}):(0,r.jsx)("div",{style:{width:"".concat(U.counter/S.length*100,"%"),backgroundColor:"".concat(h().primaryColor),height:"4px"}})}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,r.jsx)("div",{children:(0,r.jsx)(y.z,{kind:"tertiary",bgColor:"transparent",size:"tiny",onClick:function(){J({type:"pause"}),setTimeout((function(){J({type:"prevA"})}),200),setTimeout((function(){J({type:"prevB"})}),200)},children:(0,r.jsx)(p.x,{align:"center",children:(0,r.jsx)("span",{className:"material-icons ".concat(h().icon48),children:"skip_previous"})})})}),(0,r.jsx)("div",{children:!U.isPlaying&&(0,r.jsx)(y.z,{kind:"tertiary",bgColor:"transparent",size:"tiny",onClick:function(){b.tq&&e.push("/app#text-area"),J({type:"start"})},children:(0,r.jsx)(p.x,{align:"center",children:(0,r.jsx)("span",{className:"material-icons ".concat(h().icon96),children:"play_arrow"})})})}),(0,r.jsx)("div",{children:U.isPlaying&&(0,r.jsx)(y.z,{kind:"tertiary",bgColor:"transparent",size:"tiny",onClick:function(){J({type:"pause"})},children:(0,r.jsx)(p.x,{align:"center",children:(0,r.jsx)("span",{className:"material-icons ".concat(h().icon96),children:"pause"})})})}),(0,r.jsx)("div",{children:(0,r.jsx)(y.z,{kind:"tertiary",bgColor:"transparent",size:"tiny",onClick:function(){J({type:"pause"}),setTimeout((function(){J({type:"next"})}),200)},children:(0,r.jsx)(p.x,{align:"center",children:(0,r.jsx)("span",{className:"material-icons ".concat(h().icon48),children:"skip_next"})})})})]}),(0,r.jsx)("div",{children:(0,r.jsx)(y.z,{kind:"tertiary",bgColor:"transparent",size:"medium",isFullWidth:!0,onClick:function(){J({type:"stop"})},style:{padding:"0px"},children:(0,r.jsx)(p.x,{align:"center",weight:"700",className:h().primaryFontColor,children:"STOP"})})})]})}),(0,r.jsxs)(d.E,{as:"div",marginBottom:"huge",id:"help",children:[(0,r.jsx)(u.X,{as:"h4",marginTop:"micro",marginBottom:"tiny",children:"Need help?"}),(0,r.jsxs)(d.E,{as:"div",style:{display:"flex",cursor:"pointer"},children:[(0,r.jsx)(u.X,{as:"h6",marginRight:"micro",style:{borderBottom:"".concat(1==D?"3px solid ".concat(h().primaryColor):"")},paddingBottom:"nano",onClick:function(){F(1)},children:"Install app"}),(0,r.jsx)(u.X,{as:"h6",marginRight:"micro",style:{borderBottom:"".concat(2==D?"3px solid ".concat(h().primaryColor):"")},onClick:function(){F(2)},children:"Voices"}),(0,r.jsx)(u.X,{as:"h6",marginRight:"micro",style:{borderBottom:"".concat(3==D?"3px solid ".concat(h().primaryColor):"")},onClick:function(){F(3)},children:"Other"})]}),1==D&&(0,r.jsxs)(d.E,{as:"div",children:[(0,r.jsx)(p.x,{weight:"700",size:"large",marginBottom:"none",children:"Mobile devices"}),(0,r.jsxs)(p.x,{marginTop:"none",marginBottom:"none",children:[(0,r.jsx)("strong",{children:"Android:"})," Browser menu > Add to Home screen"]}),(0,r.jsx)(p.x,{weight:"700",size:"large",marginBottom:"none",children:"Desktop"}),(0,r.jsx)(p.x,{marginTop:"none",children:"You can simply bookmark this page for regular use."})]}),2==D&&(0,r.jsxs)(d.E,{as:"div",children:[(0,r.jsx)(p.x,{children:"\ud83d\udc49 Pick a voice that matches the text language."}),(0,r.jsx)(p.x,{children:"\ud83d\udc49 On desktops, use Google Chrome for best voices."}),(0,r.jsx)(p.x,{children:"\ud83d\udc49 On mobile devices, voices provided by the default text to speech engine are used."}),(0,r.jsx)(p.x,{weight:"700",size:"large",marginBottom:"none",children:"How do I change default voice on a mobile device?"}),(0,r.jsx)(p.x,{marginTop:"none",children:"Default voices can be changed through Text to speech settings of the mobile device."}),(0,r.jsx)(p.x,{weight:"700",size:"large",marginBottom:"none",children:"I do not see any voices in the list"}),(0,r.jsx)(p.x,{marginTop:"none",children:"Refresh the page a couple of times or try a different browser such as Google Chrome. If none of the browsers help, then your device does not support text to speech."})]}),3==D&&(0,r.jsxs)(d.E,{as:"div",children:[(0,r.jsx)(p.x,{weight:"700",size:"large",marginBottom:"none",children:"What browsers are supported?"}),(0,r.jsx)(p.x,{marginTop:"none",children:"This app should work on most modern browsers, except Safari."}),(0,r.jsx)(p.x,{weight:"700",size:"large",marginBottom:"none",children:"Article is not being fetched or is messed up"}),(0,r.jsx)(p.x,{marginTop:"none",children:"Extracting an article from a web page is usually not fool proof due to various factors. Recommended fix is to copy paste the article text from the source page."}),(0,r.jsx)(p.x,{weight:"700",size:"large",marginBottom:"none",children:"Speaking is stuck in the middle of a sentence"}),(0,r.jsx)(p.x,{marginTop:"none",children:"Skip to the next sentence. This could be due to very long sentences not being supported by the voice."})]}),(0,r.jsxs)(p.x,{align:"center",marginTop:"small",marginBottom:"none",children:["Another project by ",(0,r.jsx)("a",{href:"https://yakshag.github.io",target:"blank",children:"Vivek"})]})]})]})}}},function(e){e.O(0,[506,774,888,179],(function(){return n=6898,e(e.s=n);var n}));var n=e.O();_N_E=n}]);